import { BlendMode } from './blendModes';
import { Node } from 'three/webgpu';
import { TransformConfig } from './utilities/uvTransform';

export type { TransformConfig };
export interface UniformDefinition {
    uniform: any;
    transform?: (value: any) => any;
}
/**
 * Defines types of masks that can be applied to components
 */
export type MaskType = 'alpha' | 'alphaInverted' | 'luminance' | 'luminanceInverted';
/**
 * Mask source configuration
 */
export interface MaskConfig {
    /**
     * Element ID reference to use as a mask (ID of another component)
     */
    source: string;
    /**
     * How the mask should be applied:
     * - 'alpha': Uses the alpha channel of the mask
     * - 'alphaInverted': Uses the inverted alpha channel of the mask
     * - 'luminance': Uses the luminance (brightness) of the mask
     * - 'luminanceInverted': Uses the inverted luminance of the mask
     */
    type: MaskType;
}
/**
 * Node metadata including blend information and masking
 */
export interface NodeMetadata {
    /**
     * Blend mode to use when compositing this element with siblings
     */
    blendMode: BlendMode;
    /**
     * Opacity to apply during blending
     */
    opacity: number | undefined;
    /**
     * Whether this node is visible (defaults to true)
     * Hidden nodes (visible=false) are completely excluded from composition
     */
    visible?: boolean;
    /**
     * Optional unique ID that can be referenced by other components
     */
    id?: string;
    /**
     * Optional mask configuration
     */
    mask?: MaskConfig;
    /**
     * Position among siblings for rendering order (higher renders on top)
     */
    renderOrder: number;
    /**
     * Optional transformation configuration
     * Only creates RTT boundary if values differ from defaults
     */
    transform?: TransformConfig;
}
export interface UniformsMap {
    [key: string]: UniformDefinition;
}
/**
 * UI control types for props
 */
export type PropUIType = 'text' | 'number' | 'range' | 'color' | 'checkbox' | 'select' | 'position' | 'image-upload';
/**
 * UI metadata for prop controls
 */
export interface PropUIConfig {
    /**
     * The type of UI control to render
     */
    type?: PropUIType;
    /**
     * Minimum value (for number/range inputs)
     */
    min?: number;
    /**
     * Maximum value (for number/range inputs)
     */
    max?: number;
    /**
     * Step size (for number/range inputs)
     */
    step?: number;
    /**
     * Options for select inputs
     */
    options?: Array<{
        label: string;
        value: any;
    }>;
    /**
     * Display label (defaults to prop key if not provided)
     */
    label?: string;
}
export type PropConfig<T> = {
    default: T;
    transform?: (value: T) => any;
    description?: string;
    ui?: PropUIConfig;
};
export type ComponentProps = Record<string, any>;
/**
 * Function that can be registered to clean up resources when a node is removed
 */
export type CleanupCallback = () => void;
/**
 * Parameters passed to render callbacks
 */
export interface RenderCallbackParams {
    /**
     * Time in seconds since the last frame
     */
    deltaTime: number;
    /**
     * Normalized mouse/touch position (0-1)
     */
    pointer: {
        x: number;
        y: number;
    };
    /**
     * Whether the pointer is currently active (mouse down or touch active)
     */
    pointerActive: boolean;
    /**
     * Current dimensions of the canvas
     */
    dimensions: {
        width: number;
        height: number;
    };
}
/**
 * Function that is called during the render process
 */
export type RenderCallback = (params: RenderCallbackParams) => void;
/**
 * Parameters passed to resize callbacks
 */
export interface ResizeCallbackParams {
    /**
     * New width of the canvas
     */
    width: number;
    /**
     * New height of the canvas
     */
    height: number;
}
/**
 * Function that is called when the canvas resizes
 */
export type ResizeCallback = (params: ResizeCallbackParams) => void;
/**
 * Parameters for fragment node function
 */
export interface FragmentNodeParams {
    /**
     * The parsed uniform data from props
     */
    uniforms: UniformsMap;
    /**
     * A vec4 node representing the combined children (if any) of this node
     */
    childNode?: Node;
    /**
     * Register a callback to be executed when the node is removed
     * This is useful for cleaning up resources like event listeners
     */
    onCleanup: (callback: CleanupCallback) => void;
    /**
     * Register a callback to be executed before each render frame
     * This is useful for preparing data or updating uniforms before rendering
     */
    onBeforeRender: (callback: RenderCallback) => void;
    /**
     * Register a callback to be executed after each render frame
     * This is useful for post-render operations or preparing for the next frame
     */
    onAfterRender: (callback: RenderCallback) => void;
    /**
     * Register a callback to be executed when the canvas resizes
     * This is useful for resizing render targets in RTT effects
     */
    onResize: (callback: ResizeCallback) => void;
    /**
     * Reference to the canvas element used for rendering
     * This is useful for accessing canvas properties like width and height
     * as well as establish resize observers for RTT effects
     */
    canvas: HTMLCanvasElement;
    /**
     * Current renderer dimensions (managed by the renderer)
     * Use these instead of canvas.clientWidth/clientHeight to avoid issues with hidden canvases
     */
    dimensions: {
        width: number;
        height: number;
    };
    /**
     * Reference to the Three.js renderer instance
     * This is useful for manual render target management in RTT effects
     */
    renderer: any;
}
/**
 * The definition of a component within the Shader library.
 */
export interface ComponentDefinition<T extends ComponentProps = ComponentProps> {
    /**
     * The name of the component. Will be automatically prefixed with "ombre", such as "OmbreSpiral".
     */
    name: string;
    /**
     * The category this shader belongs to for organization in UI
     */
    category?: string;
    /**
     * A brief description of what this shader does
     */
    description?: string;
    /**
     * Whether this shader requires render-to-texture (RTT) for proper operation.
     * Defaults to false. Set to true for effects that need to sample from child textures.
     */
    requiresRTT?: boolean;
    /**
     * Whether this shader requires a child component to function.
     * Defaults to false. Set to true for filter effects that operate on child content.
     * Generative effects that create their own visuals should leave this false/undefined.
     */
    requiresChild?: boolean;
    /**
     * The props that can be passed to the component by the end-user.
     */
    props: {
        [K in keyof T]: PropConfig<T[K]>;
    };
    /**
     * A function that returns the Three TSL fragment node for this component.
     */
    fragmentNode: (params: FragmentNodeParams) => Node;
}
//# sourceMappingURL=types.d.ts.map