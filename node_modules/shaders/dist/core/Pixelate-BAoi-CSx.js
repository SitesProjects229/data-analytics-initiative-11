import { convertToTexture, floor, screenUV, vec4 } from "three/tsl";
const componentDefinition = {
	name: "Pixelate",
	category: "Stylize",
	description: "Pixelation effect with adjustable cell size",
	requiresRTT: true,
	requiresChild: true,
	props: { scale: {
		default: 50,
		description: "Pixel size - higher values create larger, more visible pixels",
		ui: {
			type: "range",
			min: 1,
			max: 200,
			step: 1,
			label: "Scale"
		}
	} },
	fragmentNode: ({ uniforms, childNode, onCleanup }) => {
		if (!childNode) return vec4(0, 0, 0, 0);
		const childTexture = convertToTexture(childNode);
		onCleanup(() => {
			if (childTexture?.renderTarget?.dispose) childTexture.renderTarget.dispose();
		});
		const pixelSize = uniforms.scale.uniform;
		const pixelatedUV = floor(screenUV.mul(pixelSize)).div(pixelSize);
		return childTexture.sample(pixelatedUV);
	}
};
var Pixelate_default = componentDefinition;
export { componentDefinition as n, Pixelate_default as t };
